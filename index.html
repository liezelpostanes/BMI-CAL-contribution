<!DOCTYPE html>
<head>
  <link href="https://fonts.googleapis.com/css?family=Quicksand:400,700" rel="stylesheet">
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.0/jquery.min.js"></script>
  <script>
    $(document).ready(function() {
      $('#submit').click(function(event) {
        var age = parseInt($('#age').val());
        var height = parseInt($('#height').val());
        var weight = parseInt($('#weight').val());
        var gender = $('input[name=radio]:checked').val();

        // Validate input
        if (age <= 0 || height <= 0 || weight <= 0 || (gender !== 'M' && gender !== 'F')) {
          alert('All fields are required!');
          return;
        }

        // Prepare the data as a JSON payload
        var data = JSON.stringify({
          "age": age,
          "height": height,
          "weight": weight,
          "gender": gender
        });

        // Send the AJAX request
        $.ajax({
          url: "cgi-bin/post.o",
          type: "POST",
          data: data,
          contentType: "application/json",
          success: function(response) {
            // Handle the response
            var result = JSON.parse(response);
            var bmi = result.bmi.toFixed(2);
            var category = result.category;
            var resultText = "BMI: " + bmi + " - " + category;

            $('#result').text(resultText);
          },
          error: function(xhr, status, error) {
            console.error("AJAX request error:", status, error);
          }
        });
      });
    });
  </script>
</head>
<body>
  <form class="form" id="form" onsubmit="return validateForm()">
    <div class="row-one">
      <h3>BODY MASS INDEX CALCULATOR</h3>
      <input type="text" class="text-input" id="name" autocomplete="off" required><p class="text">Name</p>
      <input type="text" class="text-input" id="age" autocomplete="off" required><p class="text">Age</p>
      <label class="container">
        <input type="radio" name="radio" value="F" required><p class="text">Female</p>
        <span class="checkmark"></span>
      </label>
      <label class="container">
        <input type="radio" name="radio" value="M" required><p class="text">Male</p>
        <span class="checkmark"></span>
      </label>
    </div>
    <div class="row-one">
      <input type="text" class="text-input" id="height" autocomplete="off" required><p class="text">Height (cm)</p>
      <input type="text" class="text-input" id="weight" autocomplete="off" required><p class="text">Weight (kg)</p>
    </div>
    <div class="row-two">
      <button type="button" id="submit">Submit</button>
    </div>
  </form>
  <p id="result"></p>
</body>
<link rel="stylesheet" href="index.css">
<script src="index.js"></script>

